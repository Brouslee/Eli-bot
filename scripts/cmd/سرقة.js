module.exports = {
	config: {
		name: "Ø³Ø±Ù‚Ø©",
		version: "3.0",
		author: "SIFOANTER + GPT",
		countDown: 60,
		role: 0,
		description: { ar: "Ù„Ø¹Ø¨Ø© Ø³Ø±Ù‚Ø© ØªÙØ§Ø¹Ù„ÙŠØ©: Ù‡Ø¯Ù Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ø£Ùˆ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø¯Ø¯" },
		category: "Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨",
		guide: {
			ar: "{pn} <@Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…|Ø¹Ø´ÙˆØ§Ø¦ÙŠ>: Ù…Ø­Ø§ÙˆÙ„Ø© Ø³Ø±Ù‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ù‡Ø¯Ù Ø¹Ø´ÙˆØ§Ø¦ÙŠ"
		}
	},

	langs: {
		ar: {
			robbingUser: "â–¸ â—‰ Ø¬Ø§Ø±ÙŠ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø³Ø±Ù‚Ø©...\nâ”‚ Ø§Ù„Ù‡Ø¯Ù: %1\nâ”‚ Ø§Ù†ØªØ¸Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø©...",
			robSuccess: "â–¸ â—‰ Ø³Ø±Ù‚Ø© Ù†Ø§Ø¬Ø­Ø©!\nâ”‚ Ø­ØµÙ„Øª Ø¹Ù„Ù‰: %1 ğŸ’°\nâ”‚ ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ø­Ø³Ø§Ø¨Ùƒ",
			robFailed: "â–¸ â—‰ ÙØ´Ù„ Ø§Ù„Ø³Ø±Ù‚Ø©!\nâ”‚ ØªÙ… Ø§ÙƒØªØ´Ø§ÙÙƒ!\nâ”‚ ØºØ±Ø§Ù…Ø©: %1 ğŸ’°\nâ”‚ Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§",
			noMention: "â–¸ â—‰ Ø­Ø¯Ø¯ Ù‡Ø¯Ù Ø§Ù„Ø³Ø±Ù‚Ø© Ø£Ùˆ Ø§ÙƒØªØ¨ 'Ø¹Ø´ÙˆØ§Ø¦ÙŠ'",
			selfRob: "â–¸ â—‰ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø±Ù‚Ø© Ù†ÙØ³Ùƒ!",
			notEnoughMoney: "â–¸ â—‰ ØªØ­ØªØ§Ø¬ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ %1 ğŸ’° Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ø§Ù„Ø³Ø±Ù‚Ø©",
			targetBroke: "â–¸ â—‰ Ø§Ù„Ù‡Ø¯Ù Ù…ÙÙ„Ø³! Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠØ¡ Ù„Ù„Ø³Ø±Ù‚Ø©"
		}
	},

	randomTargets: [
		"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©", "Ø§Ù„Ù…ÙƒØªØ¨Ø©", "Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹", "Ø§Ù„Ù…ØµØ±Ù", "Ø§Ù„Ù…ØªØ­Ù", "Ø§Ù„Ù…ÙˆÙ„", "Ø§Ù„Ù…Ø·Ø¹Ù…", "Ø§Ù„Ù…Ù‚Ù‡Ù‰", "Ø§Ù„ÙˆØ±Ø´Ø©", "Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰",
		"Ø§Ù„Ù…Ø¯Ø±Ø³Ø©", "Ø§Ù„Ù…Ù„Ø¹Ø¨", "Ù…Ø­Ø·Ø© Ø§Ù„Ù‚Ø·Ø§Ø±", "Ø§Ù„Ù…ÙŠÙ†Ø§Ø¡", "Ø§Ù„Ø³ÙˆÙ‚", "Ø§Ù„Ø¨Ø±Ø¬", "Ø§Ù„Ø­Ø¯ÙŠÙ‚Ø©", "Ø§Ù„Ø¹Ù…Ø§Ø±Ø©", "Ø§Ù„ÙÙ†Ø¯Ù‚", "Ø§Ù„Ø³ÙŠÙ†Ù…Ø§"
	],

	targetChances: [
		0.6, 0.5, 0.55, 0.4, 0.7, 0.3, 0.65, 0.5, 0.45, 0.6,
		0.5, 0.55, 0.35, 0.7, 0.4, 0.6, 0.5, 0.45, 0.6, 0.5
	],

	targetRewards: [
		1000, 1500, 2000, 1200, 1800, 2200, 1600, 1400, 2500, 1900,
		1700, 1300, 2000, 1500, 1600, 1800, 1400, 2100, 2300, 1200
	],

	onStart: async function ({ message, usersData, event, args, getLang }) {
		const userData = await usersData.get(event.senderID);
		const userMoney = userData.money || 0;

		if (args.length === 0) return message.reply("â–¸ â—‰ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø³Ø±Ù‚Ø©:\nâ”‚ Ø³Ø±Ù‚Ø© @Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ 'Ø¹Ø´ÙˆØ§Ø¦ÙŠ'\nâ–¸ â—‰ Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆÙ‡Ù…ÙŠØ© Ù„Ù„ØªØ±ÙÙŠÙ‡ ÙÙ‚Ø·!");

		let target = args[0];
		let targetName, chance, reward, isRandom = false;

		if (target === "Ø¹Ø´ÙˆØ§Ø¦ÙŠ") {
			isRandom = true;
			const idx = Math.floor(Math.random() * this.randomTargets.length);
			targetName = this.randomTargets[idx];
			chance = this.targetChances[idx];
			reward = this.targetRewards[idx];
		} else if (Object.keys(event.mentions).length > 0) {
			const targetUID = Object.keys(event.mentions)[0];
			if (targetUID === event.senderID) return message.reply(getLang("selfRob"));

			const targetData = await usersData.get(targetUID);
			const targetMoney = targetData.money || 0;
			if (targetMoney < 100) return message.reply(getLang("targetBroke"));

			targetName = event.mentions[targetUID].replace("@", "");
			chance = 0.6; // Ù†Ø³Ø¨Ø© Ù†Ø¬Ø§Ø­ Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
			reward = Math.min(Math.floor(targetMoney * 0.15), 2500);
		} else {
			return message.reply(getLang("noMention"));
		}

		message.reply(getLang("robbingUser", targetName));

		setTimeout(async () => {
			const success = Math.random() < chance;
			if (success) {
				await usersData.set(event.senderID, { money: userMoney + reward });
				if (!isRandom) {
					const targetUID = Object.keys(event.mentions)[0];
					const targetData = await usersData.get(targetUID);
					const targetMoney = targetData.money || 0;
					await usersData.set(targetUID, { money: Math.max(0, targetMoney - reward) });
				}
				message.reply(getLang("robSuccess", reward.toLocaleString('ar-SA')));
			} else {
				const penalty = Math.floor(Math.random() * 2000) + 500;
				await usersData.set(event.senderID, { money: Math.max(0, userMoney - penalty) });
				message.reply(getLang("robFailed", penalty.toLocaleString('ar-SA')));
			}
		}, 4000);
	}
};